<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank B</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
<div class="container bank-page" id="bankB-container">
    <h1 class="main-title" onclick="window.location.href='index.html'">Interbank Payment Service</h1>

    <!-- Login Formu -->
    <div id="login-section" style="display: none;">
        <div class="login-header bank-b-header">
            <h2>Bank B Giris</h2>
        </div>

        <form class="login-form" onsubmit="return loginBankB(event)">
            <div class="form-group">
                <label for="username">Email</label>
                <input type="email" id="username" name="username" required placeholder="Email adresinizi girin">
            </div>

            <div class="form-group">
                <label for="password">Sifre</label>
                <input type="password" id="password" name="password" required placeholder="Sifrenizi girin">
            </div>

            <div id="error-message" class="error-message" style="display: none; color: red; margin: 10px 0;"></div>

            <button type="submit" class="btn-login btn-bank-b">Giris Yap</button>
            <button type="button" class="btn-back-login" onclick="window.location.href='index.html'">Ana Sayfaya Don</button>
        </form>
    </div>

    <!-- Icerik Bolumu -->
    <div id="content-section" style="display: none;">
        <div class="bank-header">
            <h2>Bank B</h2>
            <div>
                <button class="btn-logout" onclick="logoutBankB()">Cikis</button>
                <button class="btn-back" onclick="window.location.href='index.html'">Geri</button>
            </div>
        </div>

        <div class="bank-content-box bank-b-box">
            <div class="user-info">
                <p id="bankB-user-name"></p>
                <p id="bankB-user-email"></p>
                <p id="bankB-user-balance"></p>
            </div>
            <h3>Bank B'ye Hos Geldiniz</h3>
            
            <!-- Ã–zel iÃ§erik yerine butonlar -->
            <div class="action-buttons">
                <button class="btn-action btn-deposit" onclick="window.location.href='depositB.html'">
                    ðŸ’° Para YatÄ±r
                </button>
                <button class="btn-action btn-withdraw" onclick="window.location.href='withdrawB.html'">
                    ðŸ’¸ Para Ã‡ek
                </button>
                <button class="btn-action btn-transfer" onclick="window.location.href='transferB.html'">
                    ðŸ”„ Para GÃ¶nder
                </button>
            </div>
        </div>
    </div>
</div>
<script src="scripts/login.js"></script>
<script>
    window.API_URL = "https://unconsternated-theodore-nonedified.ngrok-free.dev";
    // Sayfa yuklendiginde kontrol et
    window.onload = function() {
        const isLoggedIn = sessionStorage.getItem('bankB_logged_in') === 'true';
        const loginSection = document.getElementById('login-section');
        const contentSection = document.getElementById('content-section');

        if (isLoggedIn) {
            loginSection.style.display = 'none';
            contentSection.style.display = 'block';

            const userRaw = sessionStorage.getItem('bankB_user');
            if (userRaw) {
                try {
                    const user = JSON.parse(userRaw);
                    document.getElementById('bankB-user-name').textContent = user.name ? ('Isim: ' + user.name) : '';
                    document.getElementById('bankB-user-email').textContent = user.email ? ('Email: ' + user.email) : '';
                    if (typeof user.balance === 'number') {
                        document.getElementById('bankB-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
                    }
                } catch (e) {
                    console.error('Kullanici bilgisi okunamadi', e);
                }
            }
        } else {
            loginSection.style.display = 'block';
            contentSection.style.display = 'none';
        }
    };
</script>
</body>
</html>
