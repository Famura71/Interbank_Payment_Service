<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank A</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
<div class="container bank-page" id="bankA-container">
    <h1 class="main-title" onclick="window.location.href='index.html'">Interbank Payment Service</h1>

    <!-- Login Formu -->
    <div id="login-section" style="display: none;">
        <div class="login-header bank-a-header">
            <h2>Bank A Giris</h2>
        </div>

        <form class="login-form" onsubmit="return loginBankA(event)">
            <div class="form-group">
                <label for="username">Email</label>
                <input type="email" id="username" name="username" required placeholder="Email adresinizi girin">
            </div>

            <div class="form-group">
                <label for="password">Sifre</label>
                <input type="password" id="password" name="password" required placeholder="Sifrenizi girin">
            </div>

            <div id="error-message" class="error-message" style="display: none; color: red; margin: 10px 0;"></div>

            <button type="submit" class="btn-login btn-bank-a">Giris Yap</button>
            <button type="button" class="btn-back-login" onclick="window.location.href='index.html'">Ana Sayfaya Don</button>
        </form>
    </div>

    <!-- Icerik Bolumu -->
    <div id="content-section" style="display: none;">
        <div class="bank-header">
            <h2>Bank A</h2>
            <div>
                <button class="btn-logout" onclick="logoutBankA()">Cikis</button>
                <button class="btn-back" onclick="window.location.href='index.html'">Geri</button>
            </div>
        </div>

        <div class="bank-content-box bank-a-box">
            <div class="user-info">
                <p id="bankA-user-name"></p>
                <p id="bankA-user-email"></p>
                <p id="bankA-user-balance"></p>
            </div>
            <h3>Bank A'ya Hos Geldiniz</h3>
            
            <!-- Ã–zel iÃ§erik yerine butonlar -->
            <div class="action-buttons">
                <button class="btn-action btn-deposit" onclick="showDepositModal()">
                    ðŸ’° Para YatÄ±r
                </button>
                <button class="btn-action btn-withdraw" onclick="showWithdrawModal()">
                    ðŸ’¸ Para Ã‡ek
                </button>
                <button class="btn-action btn-transfer" onclick="showTransferModal()">
                    ðŸ”„ Para GÃ¶nder
                </button>
            </div>
        </div>

        <!-- Modaller -->
        <div id="depositModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('depositModal')">&times;</span>
            <h3>Para YatÄ±r</h3>
            <input type="number" id="depositAmount" placeholder="Miktar" min="1">
            <button onclick="deposit()">YatÄ±r</button>
        </div>
    </div>

    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('withdrawModal')">&times;</span>
            <h3>Para Ã‡ek</h3>
            <input type="number" id="withdrawAmount" placeholder="Miktar" min="1">
            <button onclick="withdraw()">Ã‡ek</button>
        </div>
    </div>

    <div id="transferModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('transferModal')">&times;</span>
            <h3>Para GÃ¶nder</h3>
            <input type="text" id="receiverName" placeholder="AlÄ±cÄ± AdÄ±">
            <input type="number" id="transferAmount" placeholder="Miktar" min="1">
            <button onclick="transfer()">GÃ¶nder</button>
        </div>
    </div>
</div>
<script src="scripts/login.js"></script>
<script>
    // Sayfa yuklendiginde kontrol et
    window.onload = function() {
        const isLoggedIn = sessionStorage.getItem('bankA_logged_in') === 'true';
        const loginSection = document.getElementById('login-section');
        const contentSection = document.getElementById('content-section');

        if (isLoggedIn) {
            loginSection.style.display = 'none';
            contentSection.style.display = 'block';

            const userRaw = sessionStorage.getItem('bankA_user');
            if (userRaw) {
                try {
                    const user = JSON.parse(userRaw);
                    document.getElementById('bankA-user-name').textContent = user.name ? ('Isim: ' + user.name) : '';
                    document.getElementById('bankA-user-email').textContent = user.email ? ('Email: ' + user.email) : '';
                    if (typeof user.balance === 'number') {
                        document.getElementById('bankA-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
                    }
                } catch (e) {
                    console.error('Kullanici bilgisi okunamadi', e);
                }
            }
        } else {
            loginSection.style.display = 'block';
            contentSection.style.display = 'none';
        }
    };
</script>
</body>
</html>
