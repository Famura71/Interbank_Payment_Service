<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank A</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
<div class="container bank-page" id="bankA-container">
    <h1 class="main-title" onclick="window.location.href='index.html'">Interbank Payment Service</h1>

    <!-- Login Formu -->
    <div id="login-section" style="display: none;">
        <div class="login-header bank-a-header">
            <h2>Bank A Giris</h2>
        </div>

        <form class="login-form" onsubmit="return loginBankA(event)">
            <div class="form-group">
                <label for="username">Email</label>
                <input type="email" id="username" name="username" required placeholder="Email adresinizi girin">
            </div>

            <div class="form-group">
                <label for="password">Sifre</label>
                <input type="password" id="password" name="password" required placeholder="Sifrenizi girin">
            </div>

            <div id="error-message" class="error-message" style="display: none; color: red; margin: 10px 0;"></div>

            <button type="submit" class="btn-login btn-bank-a">Giris Yap</button>
            <button type="button" class="btn-back-login" onclick="window.location.href='index.html'">Ana Sayfaya Don</button>
        </form>
    </div>

    <!-- Icerik Bolumu -->
    <div id="content-section" style="display: none;">
        <div class="bank-header">
            <h2>Bank A</h2>
            <div>
                <button class="btn-logout" onclick="logoutBankA()">Cikis</button>
                <button class="btn-back" onclick="window.location.href='index.html'">Geri</button>
            </div>
        </div>

        <div class="bank-content-box bank-a-box">
            <div class="user-info">
                <p id="bankA-user-name"></p>
                <p id="bankA-user-email"></p>
                <p id="bankA-user-balance"></p>
            </div>
            <h3>Bank A'ya Hos Geldiniz</h3>
            
            <!-- Ã–zel iÃ§erik yerine butonlar -->
            <div class="action-buttons">
                <button class="btn-action btn-deposit" onclick="window.location.href='depositA.html'">
                    ðŸ’° Para YatÄ±r
                </button>
                <button class="btn-action btn-withdraw" onclick="window.location.href='withdrawA.html'">
                    ðŸ’¸ Para Ã‡ek
                </button>
                <button class="btn-action btn-transfer" onclick="window.location.href='transferA.html'">
                    ðŸ”„ Para GÃ¶nder
                </button>
            </div>
        </div>

        <!-- Modaller kaldÄ±rÄ±ldÄ± -->
    </div>
</div>
<script src="scripts/login.js"></script>
<script>
    // Sayfa yuklendiginde kontrol et
    window.onload = function() {
        const isLoggedIn = sessionStorage.getItem('bankA_logged_in') === 'true';
        const loginSection = document.getElementById('login-section');
        const contentSection = document.getElementById('content-section');

        if (isLoggedIn) {
            loginSection.style.display = 'none';
            contentSection.style.display = 'block';

            const userRaw = sessionStorage.getItem('bankA_user');
            if (userRaw) {
                try {
                    const user = JSON.parse(userRaw);
                    document.getElementById('bankA-user-name').textContent = user.name ? ('Isim: ' + user.name) : '';
                    document.getElementById('bankA-user-email').textContent = user.email ? ('Email: ' + user.email) : '';
                    if (typeof user.balance === 'number') {
                        document.getElementById('bankA-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
                    }
                } catch (e) {
                    console.error('Kullanici bilgisi okunamadi', e);
                }
            }
        } else {
            loginSection.style.display = 'block';
            contentSection.style.display = 'none';
        }
    };

    // Modal fonksiyonlarÄ±
    function showDepositModal() {
        document.getElementById('depositModal').style.display = 'block';
    }

    function showWithdrawModal() {
        document.getElementById('withdrawModal').style.display = 'block';
    }

    function showTransferModal() {
        document.getElementById('transferModal').style.display = 'block';
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    // Modal dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda kapat
    window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = 'none';
        }
    }

    // Para yatÄ±rma iÅŸlemi
    function deposit() {
        const amount = document.getElementById('depositAmount').value;
        if (!amount || amount <= 0) {
            alert('LÃ¼tfen geÃ§erli bir miktar girin!');
            return;
        }

        // Burada backend API'nize istek gÃ¶nderebilirsiniz
        alert(`${amount} TL para yatÄ±rma iÅŸlemi baÅŸarÄ±lÄ±!`);
        
        // Bakiyeyi gÃ¼ncelle (Ã¶rnek)
        const user = JSON.parse(sessionStorage.getItem('bankA_user'));
        user.balance = parseFloat(user.balance) + parseFloat(amount);
        sessionStorage.setItem('bankA_user', JSON.stringify(user));
        document.getElementById('bankA-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
        
        closeModal('depositModal');
        document.getElementById('depositAmount').value = '';
    }

    // Para Ã§ekme iÅŸlemi
    function withdraw() {
        const amount = document.getElementById('withdrawAmount').value;
        const user = JSON.parse(sessionStorage.getItem('bankA_user'));
        
        if (!amount || amount <= 0) {
            alert('LÃ¼tfen geÃ§erli bir miktar girin!');
            return;
        }

        if (parseFloat(amount) > user.balance) {
            alert('Yetersiz bakiye!');
            return;
        }

        // Burada backend API'nize istek gÃ¶nderebilirsiniz
        alert(`${amount} TL para Ã§ekme iÅŸlemi baÅŸarÄ±lÄ±!`);
        
        // Bakiyeyi gÃ¼ncelle
        user.balance = parseFloat(user.balance) - parseFloat(amount);
        sessionStorage.setItem('bankA_user', JSON.stringify(user));
        document.getElementById('bankA-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
        
        closeModal('withdrawModal');
        document.getElementById('withdrawAmount').value = '';
    }

    // Para gÃ¶nderme iÅŸlemi
    function transfer() {
        const receiverName = document.getElementById('receiverName').value;
        const amount = document.getElementById('transferAmount').value;
        const user = JSON.parse(sessionStorage.getItem('bankA_user'));
        
        if (!receiverName || !amount || amount <= 0) {
            alert('LÃ¼tfen tÃ¼m alanlarÄ± doldurun!');
            return;
        }

        if (parseFloat(amount) > user.balance) {
            alert('Yetersiz bakiye!');
            return;
        }

        // Burada backend API'nize istek gÃ¶nderebilirsiniz
        alert(`${receiverName} kiÅŸisine ${amount} TL gÃ¶nderme iÅŸlemi baÅŸarÄ±lÄ±!`);
        
        // Bakiyeyi gÃ¼ncelle
        user.balance = parseFloat(user.balance) - parseFloat(amount);
        sessionStorage.setItem('bankA_user', JSON.stringify(user));
        document.getElementById('bankA-user-balance').textContent = 'Bakiye: ' + user.balance.toFixed(2);
        
        closeModal('transferModal');
        document.getElementById('receiverName').value = '';
        document.getElementById('transferAmount').value = '';
    }
</script>
</body>
</html>
